
{% extends "base.html" %}

{% block title %}Nova Auditoria - Alphaclin QMS{% endblock %}

{% block content %}
<div class="bg-white shadow rounded-lg">
    <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
        <div class="flex items-center justify-between">
            <div>
                <h3 class="text-lg leading-6 font-medium text-gray-900">
                    <i class="fas fa-plus-circle mr-2 text-blue-600"></i>
                    Nova Auditoria
                </h3>
                <p class="mt-1 max-w-2xl text-sm text-gray-500">
                    Criar nova auditoria interna ou externa
                </p>
            </div>
            <div class="flex space-x-3">
                <a href="{{ url_for('audits.index') }}" 
                   class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm font-medium transition-colors">
                    <i class="fas fa-arrow-left mr-1"></i> Voltar
                </a>
            </div>
        </div>
    </div>

    <form method="POST" class="p-6 space-y-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
                <label for="title" class="block text-sm font-medium text-gray-700 mb-2">
                    Título da Auditoria *
                </label>
                <input type="text" id="title" name="title" required
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            
            <div>
                <label for="audit_type" class="block text-sm font-medium text-gray-700 mb-2">
                    Tipo de Auditoria *
                </label>
                <select id="audit_type" name="audit_type" required
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">Selecione o tipo</option>
                    <option value="internal">Auditoria Interna</option>
                    <option value="external">Auditoria Externa</option>
                </select>
            </div>
            
            <div>
                <label for="norm_id" class="block text-sm font-medium text-gray-700 mb-2">
                    Norma Associada
                </label>
                <select id="norm_id" name="norm_id"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">Selecione a norma</option>
                    {% for norm in norms %}
                    <option value="{{ norm.id }}">{{ norm.name }} ({{ norm.code }})</option>
                    {% endfor %}
                </select>
            </div>
            
            <div>
                <label for="location" class="block text-sm font-medium text-gray-700 mb-2">
                    Local
                </label>
                <input type="text" id="location" name="location"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            
            <div>
                <label for="planned_date" class="block text-sm font-medium text-gray-700 mb-2">
                    Data Planejada
                </label>
                <input type="date" id="planned_date" name="planned_date"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            
            <div>
                <label for="assigned_auditor_id" class="block text-sm font-medium text-gray-700 mb-2">
                    Auditor Responsável
                </label>
                <select id="assigned_auditor_id" name="assigned_auditor_id"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">Selecione o auditor</option>
                    {% for auditor in auditors %}
                    <option value="{{ auditor.id }}">{{ auditor.full_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div>
                <label for="responsible_id" class="block text-sm font-medium text-gray-700 mb-2">
                    Responsável da Área
                </label>
                <select id="responsible_id" name="responsible_id"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">Selecione o responsável</option>
                    {% for user in users %}
                    <option value="{{ user.id }}">{{ user.full_name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div>
            <label for="objectives" class="block text-sm font-medium text-gray-700 mb-2">
                Objetivos
            </label>
            <textarea id="objectives" name="objectives" rows="3"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <div>
            <label for="scope" class="block text-sm font-medium text-gray-700 mb-2">
                Escopo
            </label>
            <textarea id="scope" name="scope" rows="3"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <div class="flex items-center justify-end pt-6 border-t border-gray-200">
            <div class="flex items-center space-x-3">
                <button type="submit" 
                        class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md text-sm font-medium transition-colors">
                    <i class="fas fa-save mr-1"></i>
                    Criar Auditoria
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}
